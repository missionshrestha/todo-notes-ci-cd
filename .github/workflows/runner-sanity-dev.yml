name: ğŸ§ª Runner Sanity (DEV)
on: workflow_dispatch

jobs:
  hello-dev:
    runs-on: [self-hosted, linux, x64, dev]
    timeout-minutes: 10
    defaults:
      run:
        working-directory: /opt/app

    steps:
      - name: ğŸ›¡ï¸ Trust /opt/app for Git (once per host)
        run: git config --global --add safe.directory /opt/app

      - name: ğŸ–¥ï¸ Runner & Docker info
        run: |
          echo "ğŸ‘¤ user: $(whoami)"
          echo "ğŸ§© groups:" && id
          echo "ğŸ§ kernel:" && uname -a
          echo "ğŸ³ docker:" && docker --version
          echo "ğŸ§° compose:" && docker compose version
          echo "ğŸ·ï¸  runner: ${RUNNER_NAME:-unknown} (${RUNNER_OS:-?}/${RUNNER_ARCH:-?})"
          echo "ğŸ“ workspace: ${GITHUB_WORKSPACE:-?}"
          echo "ğŸ“ pwd: $(pwd)"

      - name: ğŸ“‚ Repo status (@ /opt/app)
        run: |
          git -C /opt/app rev-parse --show-toplevel
          echo "â€” remotes â€”"
          git -C /opt/app remote -v || true
          echo "â€” status â€”"
          git -C /opt/app status --short || true
